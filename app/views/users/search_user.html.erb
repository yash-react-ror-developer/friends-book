<div class="col-md-12">
  <%= form_with url: search_user_path, method: :get, local: true do |f|%>
    <div class="col-md-8 form-group">
      <%= f.email_field :search, class: "form-control", placeholder: "Enter Email To Search"%>
    </div>
    <div class="col-md-4 form-group">
      <%= f.submit :search, class: "btn btn-primary" %>
    </div>
  <%end%>
</div>

<div id="search-result">
  <%= render partial: "search_user_result", locals: {user: @user, friendship: @friendship} %>
</div>

<script type="text/javascript">
  $(document).ready(function(){
    $(".send-request").click(function(){
      var id = this.id
      $.ajax({
        type: "Post",
        beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
        url: "send_request",
        data: {user_id: id},
        success: function(response){
        },
        failure: function(response){},
      })
    })

    $(".cancel-request").click(function(){
      var id = this.id
      $.ajax({
        type: "Delete",
        beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
        url: "cancel_request",
        data: {user_id: id},
        success: function(response){
        },
        failure: function(response){},
      })
    })

  })

</script>